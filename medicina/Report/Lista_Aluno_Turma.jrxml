<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Lista_Aluno_Turma" language="groovy" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<parameter name="ano" class="java.lang.String"/>
	<parameter name="semestre" class="java.lang.String"/>
	<parameter name="curso" class="java.lang.Integer"/>
	<parameter name="turmaI" class="java.lang.String"/>
	<parameter name="turmaF" class="java.lang.String"/>
	<parameter name="i_logo1" class="java.lang.String"/>
	<parameter name="i_logo2" class="java.lang.String"/>
	<queryString>
		<![CDATA[Select A1.A1_ID, A1.A1_MATRICULA, A1.A1_NOME, AA.AA_ANO, AA.AA_SEMESTRE, A4.A4_FILIAL, A4.A4_ID, M1.M1_DESCR, A2_DESCR, M0_DESCR
From SA101 A1
Inner Join SAA01 AA ON
   A1.A1_ID = AA.AA_IDALUNO
Inner Join SA401 A4 ON
   AA.AA_IDTURMA = A4.A4_ID
Inner Join SA201 A2 ON
   A4.A4_IDCURSO = A2.A2_ID
Inner Join SM101 M1 ON
   A4.A4_FILIAL = M1.M1_ID
Inner Join SM001 M0 ON
   M1.M1_IDEMP = M0.M0_ID
Where AA.AA_ANO = $P{ano}   
   AND AA.AA_SEMESTRE = $P{semestre}
   AND A4.A4_IDCURSO =  $P{curso} 
   AND A4.A4_ID >=  $P{turmaI} 
   AND A4.A4_ID <=  $P{turmaF} 
Order by A4_FILIAL, A4_ID, A1.A1_NOME]]>
	</queryString>
	<field name="A1_ID" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="A1_MATRICULA" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="A1_NOME" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="AA_ANO" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="AA_SEMESTRE" class="java.lang.String"/>
	<field name="A4_FILIAL" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="A4_ID" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="M1_DESCR" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="A2_DESCR" class="java.lang.String"/>
	<field name="M0_DESCR" class="java.lang.String"/>
	<group name="Unidade" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{A4_FILIAL}]]></groupExpression>
		<groupHeader>
			<band height="20">
				<rectangle>
					<reportElement x="0" y="0" width="555" height="19" backcolor="#CCCCCC"/>
				</rectangle>
				<textField>
					<reportElement x="5" y="2" width="522" height="16"/>
					<textElement>
						<font fontName="Arial" size="12" isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA['Unidade: ' + $F{A4_FILIAL} + ' - ' + $F{M1_DESCR}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="15"/>
		</groupFooter>
	</group>
	<group name="Turma" isStartNewPage="true" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{A4_ID}]]></groupExpression>
		<groupHeader>
			<band height="19">
				<textField>
					<reportElement x="5" y="1" width="161" height="18"/>
					<textElement>
						<font fontName="Arial" size="12" isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA['Turma: ' + $F{A4_ID}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="15"/>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="10" splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="176" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="0" width="555" height="175"/>
			</rectangle>
			<textField>
				<reportElement x="405" y="8" width="148" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA['Ano / Semestre: ' + $F{AA_ANO} + ' / ' + $F{AA_SEMESTRE}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="27" y="119" width="495" height="21"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="16" isBold="false"/>
				</textElement>
				<text><![CDATA[Relatorio Aluno/Turma]]></text>
			</staticText>
			<textField>
				<reportElement x="58" y="142" width="439" height="15"/>
				<textElement textAlignment="Center">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA['Curso: ' + $F{A2_DESCR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="10" y="160" width="15" height="16"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<text><![CDATA[Nº]]></text>
			</staticText>
			<staticText>
				<reportElement x="49" y="160" width="50" height="16"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<text><![CDATA[Matrícula]]></text>
			</staticText>
			<staticText>
				<reportElement x="129" y="160" width="33" height="16"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<text><![CDATA[Aluno]]></text>
			</staticText>
			<textField>
				<reportElement x="58" y="35" width="435" height="16"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{M0_DESCR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="28" y="66" width="494" height="12"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="9"/>
				</textElement>
				<text><![CDATA[Aprovadas pela Portaria SESu/MEC N. 368/2008 de 19/05/2008 (DOU 20/05/2008)]]></text>
			</staticText>
			<staticText>
				<reportElement x="28" y="54" width="494" height="12"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="9"/>
				</textElement>
				<text><![CDATA[FACULDADES INTEGRADAS DA UNIÃO EDUCACIONAL DO PLANALTO CENTRAL - FACIPLAC]]></text>
			</staticText>
			<image>
				<reportElement x="246" y="3" width="62" height="36"/>
				<imageExpression class="java.lang.String"><![CDATA[$P{i_logo1}]]></imageExpression>
			</image>
			<image>
				<reportElement x="206" y="82" width="198" height="34"/>
				<imageExpression class="java.lang.String"><![CDATA[$P{i_logo2}]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<detail>
		<band height="16" splitType="Stretch">
			<textField>
				<reportElement x="129" y="0" width="291" height="16"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{A1_NOME}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="3" y="0" width="18" height="16"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{Turma_COUNT}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="49" y="0" width="77" height="16"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{A1_MATRICULA}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="20" splitType="Stretch">
			<rectangle>
				<reportElement mode="Transparent" x="0" y="1" width="555" height="18" backcolor="#FFFFFF"/>
			</rectangle>
			<textField>
				<reportElement x="430" y="3" width="94" height="17"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.String"><![CDATA["Página  "+$V{PAGE_NUMBER}+" de "]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement x="3" y="3" width="100" height="17"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="526" y="3" width="28" height="17"/>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression class="java.lang.String"><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="4" splitType="Stretch"/>
	</summary>
</jasperReport>
